# üìò API: –î–ª—è lk
–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é API –≤ —Ñ–æ—Ä–º–∞—Ç–µ Markdown, –≤ –æ–¥–Ω–æ–º —Ü–µ–ª—å–Ω–æ–º –±–ª–æ–∫–µ –±–µ–∑ —Ä–∞–∑–±–∏–≤–∫–∏ –ø–æ —á–∞—Å—Ç—è–º.<br>
–¢–æ–ª—å–∫–æ —Å–ø–ª–æ—à–Ω–æ–π Markdown-—Ç–µ–∫—Å—Ç –≤ –≤–∏–¥–µ ¬´–ø–æ–ª–æ—Ç–Ω–∞¬ª —Å –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π —Ä–∞–∑–º–µ—Ç–∫–æ–π

## üì¶ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫

–í—Å–µ –æ—Ç–≤–µ—Ç—ã –æ—Ç API –ø—Ä–∏—Ö–æ–¥—è—Ç —Å HTTP —Å—Ç–∞—Ç—É—Å–æ–º **200 OK**, –≤–Ω–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞.  
–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –ø–æ –ø–æ–ª—é `status` –≤ —Ç–µ–ª–µ –æ—Ç–≤–µ—Ç–∞:

- `"status": "success"` ‚Äî –æ–ø–µ—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ.
- `"status": "fail"` ‚Äî –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞, –æ–ø–∏—Å–∞–Ω–∏–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø–æ–ª—è—Ö `error` –∏ `code`.
> ‚ö†Ô∏è –í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å–ª—É—á–∞—è—Ö –ø—Ä–∏ –Ω–∞—Ä—É—à–µ–Ω–∏–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π HTTP –º–µ—Ç–æ–¥) –º–æ–∂–µ—Ç –±—ã—Ç—å –≤–æ–∑–≤—Ä–∞—â—ë–Ω 400 Bad Request –∏–ª–∏ –¥—Ä—É–≥–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ HTTP –æ—à–∏–±–∫–∏.


## üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

–í—Å–µ –º–µ—Ç–æ–¥—ã —Ç—Ä–µ–±—É—é—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫:

X-Api-Key: {your_api_key}

–ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∏–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º API-–∫–ª—é—á–µ:
```json
{
  "status": "fail",
  "error": "–ù–µ –≤–µ—Ä–Ω—ã–π API –∫–ª—é—á",
  "code": 2
}
```

---

## üìò –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ –ø–∞—Ü–∏–µ–Ω—Ç—É
> ‚ö†Ô∏è –í –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –æ—Ç–¥–∞—ë—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –ø–∞—Ü–∏–µ–Ω—Ç (–Ω–æ –≤ crm.patient.lk_id –ø–æ–ª–µ –Ω–µ —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ, –ø–æ–∫–∞ —á—Ç–æ)

`POST /api/lk/schedule/patient-info`

### üì• –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞ (JSON)

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø     | –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π | –û–ø–∏—Å–∞–Ω–∏–µ                             |
|----------|---------|--------------|--------------------------------------|
| lk_id    | integer | –¥–∞           | –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–∞—Ü–∏–µ–Ω—Ç–∞ –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ |

–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:

```json
{
  "lk_id": 3703
}
```

---

### üì§ –ü—Ä–∏–º–µ—Ä —É—Å–ø–µ—à–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞

```json
{
  "status": "success",
  "data": {
    "id": 86805,
    "first_name": "–ò–≤–∞–Ω",
    "last_name": "–ò–≤–∞–Ω",
    "patronymic": "–ò–≤–∞–Ω–æ–≤–∏—á",
    "fio": "–ò–≤–∞–Ω –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á",
    "category": 1,
    "guardian_fio": "",
    "gender": 1,
    "birth": "1994-12-23",
    "phone_sms": "7 (999) 111-22-33",
    "phone_sms_clean": "79991112233",
    "phones": "",
    "email": "test@mail.ru",
    "created_by": 456,
    "created_at": "2025-06-02 21:32:40",
    "phone_sms_another": 0,
    "lk_id": 3703,
    "erp_patient_id": 658522,
    "appointments": [
      {
        "id": 102254,
        "date": "2025-06-11",
        "time_start": "09:00:00",
        "time_end": "10:00:00",
        "room_id": 30,
        "patient_id": 86805,
        "title": "–õ—é–±–æ–π —Ç–µ–∫—Å—Ç VARCHAR(255)",
        "purpose": "–õ—é–±–æ–π —Ç–µ–∫—Å—Ç TEXT",
        "status": 1,
        "created_by": 456,
        "created_at": "2025-06-02 21:32:55",
        "source": 1,
        "appointment_cabinet_id": null, // —Ç–æ–ª—å–∫–æ –¥–ª—è crm
        "type": 3,
        "uuid": null,
        "erp_jorder_id": 235287,
        "analysis_id": null,
        "price_order_uid": null,
        "is_paid": 1,
        "analysis_name": "–ù–∞–∑–≤–∞–Ω–∏–µ –∞–Ω–∞–ª–∏–∑–∞ - —Ç–µ—Å—Ç–∞",
        "room_name": "–ü—Ä–æ—Ü–µ–¥—É—Ä–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –ú–æ—Å–∫–≤–∞ (—É–ª.–£–ª–∏—Ü–∞, –¥. 33)",
        "office_address": "–ú–æ—Å–∫–≤–∞,  —É–ª. –£–ª–∏—Ü–∞, –¥–æ–º 33",
        "office_phones": "–¥–æ–±. 4017,4023",
        "office_comment": "–î–ª–∏–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç db type TEXT"
      }
    ]
  }
}
```

---

### ‚ùå –í–æ–∑–º–æ–∂–Ω—ã–µ –æ—à–∏–±–∫–∏

| –ö–æ–¥ | –°–æ–æ–±—â–µ–Ω–∏–µ                             | –ü—Ä–∏—á–∏–Ω–∞                                      |
|-----|----------------------------------------|----------------------------------------------|
| 1   | –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞                | –û—à–∏–±–∫–∏ –≤ JSON –∏–ª–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –∑–∞–ø—Ä–æ—Å–∞          |
| 2   | –ù–µ –≤–µ—Ä–Ω—ã–π API –∫–ª—é—á                     | –ü—Ä–æ–ø—É—â–µ–Ω –∏–ª–∏ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π X-Api-Key            |
| 3   | –ù–µ –ø–µ—Ä–µ–¥–∞–Ω –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä: lk_id| –ü–æ–ª–µ `lk_id` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –ø—É—Å—Ç–æ–µ          |
| 4   | –ù–µ —É–¥–∞–ª–æ—Å—å –Ω–∞–π—Ç–∏ –ø–∞—Ü–∏–µ–Ω—Ç–∞              | –ü–∞—Ü–∏–µ–Ω—Ç —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º `lk_id` –Ω–µ –Ω–∞–π–¥–µ–Ω        |

---

### üßæ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥–µ–ª–∏: –ü–∞—Ü–∏–µ–Ω—Ç (patient)

| –ü–æ–ª–µ              | –¢–∏–ø (NULL/NOT NULL)     | –û–ø–∏—Å–∞–Ω–∏–µ                                           |
|-------------------|--------------------------|----------------------------------------------------|
| id                | int NOT NULL             | ID (AUTO_INCREMENT)                                |
| first_name        | varchar(255) NOT NULL     | –ò–º—è                                                |
| last_name         | varchar(255) NOT NULL     | –§–∞–º–∏–ª–∏—è                                            |
| patronymic        | varchar(255) NULL         | –û—Ç—á–µ—Å—Ç–≤–æ                                           |
| fio               | varchar(255) NULL         | –§–ò–û                                                |
| category          | tinyint NOT NULL          | –ö–∞—Ç–µ–≥–æ—Ä–∏—è –ø–∞—Ü–∏–µ–Ω—Ç–∞ (1 ‚Äî –≤–∑—Ä–æ—Å–ª—ã–π, 2 ‚Äî —Ä–µ–±—ë–Ω–æ–∫)  —ç—Ç–æ —Ç–æ–ª—å–∫–æ –¥–ª—è CRM    |
| guardian_fio      | varchar(255) NULL         | –§–ò–û –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª—è  (—ç—Ç–æ —Ç–æ–ª—å–∫–æ –¥–ª—è CRM)                                |
| gender            | tinyint NOT NULL          | –ü–æ–ª (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:1) ( 1 - –º;  2 - –∂;)              |
| birth             | date NULL                 | –î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è (Y-m-d)                              |
| phone_sms         | varchar(20) NULL          | –¢–µ–ª–µ—Ñ–æ–Ω –¥–ª—è –°–ú–°                                    |
| phone_sms_clean   | varchar(15) NULL          | –¢–µ–ª–µ—Ñ–æ–Ω –¥–ª—è –°–ú–° (—á–∏—Å—Ç—ã–π —Ñ–æ—Ä–º–∞—Ç)                    |
| phones            | varchar(255) default ''   | –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–µ–ª–µ—Ñ–æ–Ω—ã  (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)           |
| email             | varchar(255) NOT NULL UNIQUE    | Email –∫–ª–∏–µ–Ω—Ç–∞  –ù–æ –º–æ–≥—É—Ç –±—ã—Ç—å (fake86809-24@noemail.ru) |
| created_by        | int NULL                  | ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —Å–æ–∑–¥–∞–≤—à–µ–≥–æ –∑–∞–ø–∏—Å—å                 |
| created_at        | datetime NULL             | –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø–∏—Å–∏                               |
| phone_sms_another | tinyint(1) NOT NULL       | –¢–µ–ª–µ—Ñ–æ–Ω –¥—Ä—É–≥–æ–π —Å—Ç—Ä–∞–Ω—ã (0/1, –±—É–ª–µ–≤–æ)                |
| lk_id             | int NULL                  | ID –∏–∑ –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞ –∫–ª–∏–µ–Ω—Ç–∞                     |
| erp_patient_id    | int NULL                  | ID –ø–∞—Ü–∏–µ–Ω—Ç–∞ –∏–∑ ERP (`erp.patient.id`)              |


---

### üóìÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥–µ–ª–∏: –ü—Ä–∏—ë–º (appointments)

| –ü–æ–ª–µ                    | –¢–∏–ø (NULL/NOT NULL)       | –û–ø–∏—Å–∞–Ω–∏–µ                                                                 |
|-------------------------|----------------------------|--------------------------------------------------------------------------|
| `id`                    | int NOT NULL               | ID –ø—Ä–∏—ë–º–∞ (AUTO_INCREMENT)                                               |
| `date`                  | date NOT NULL              | –î–∞—Ç–∞ –ø—Ä–∏—ë–º–∞                                                              |
| `time_start`            | time NOT NULL              | –í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞                                                             |
| `time_end`              | time NOT NULL              | –í—Ä–µ–º—è –æ–∫–æ–Ω—á–∞–Ω–∏—è                                                          |
| `room_id`               | int NOT NULL               | ID –∫–∞–±–∏–Ω–µ—Ç–∞ (crm.room.id)                                                |
| `patient_id`            | int NOT NULL               | ID –ø–∞—Ü–∏–µ–Ω—Ç–∞  (crm.patient.id)                                             |
| `title`                 | varchar(255) NOT NULL      | –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–∏—ë–º–∞ (—Ç—É–¥–∞ –∑–∞–Ω–æ—Å—è—Ç –≤—Å—ë —á—Ç–æ —É–≥–æ–¥–Ω–æ)                            |
| `purpose`               | text NULL                  | –¶–µ–ª—å –≤–∏–∑–∏—Ç–∞   (—Ç—É–¥–∞ –∑–∞–Ω–æ—Å—è—Ç –≤—Å—ë —á—Ç–æ —É–≥–æ–¥–Ω–æ)                               |
| `status`                | tinyint(1) NOT NULL        | –°—Ç–∞—Ç—É—Å –ø—Ä–∏—ë–º–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 1)                                          |
| `created_by`            | int NULL                   | ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —Å–æ–∑–¥–∞–≤—à–µ–≥–æ –∑–∞–ø–∏—Å—å                                       |
| `created_at`            | datetime NULL              | –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è                                                            |
| `source`                | tinyint NOT NULL           | –ò—Å—Ç–æ—á–Ω–∏–∫ –∑–∞–ø–∏—Å–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 1 —á–µ—Ä–µ–∑ crm; 4: price —Å–∞–π—Ç; 5: –•–∞–±–∞—Ä–æ–≤—Å–∫ —Å–∞–π—Ç)|
| `appointment_cabinet_id`| int NULL                   | ID –∫–∞–±–∏–Ω–µ—Ç–∞ –ø—Ä–∏—ë–º–∞   (—ç—Ç–æ —Ç–æ–ª—å–∫–æ –¥–ª—è CRM !!!)                            |
| `type`                  | tinyint NOT NULL           | –¢–∏–ø –ø—Ä–∏—ë–º–∞ (1 ‚Äî –æ—á–Ω–æ; 2 ‚Äî –æ–Ω–ª–∞–π–Ω –æ—Ñ–∏—Å; 3 ‚Äî –æ–Ω–ª–∞–π–Ω –¥–∏—Å—Ç–∞–Ω—Ü–∏–æ–Ω–Ω–æ)          |
| `uuid`                  | varchar(50) NULL           | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä (–Ω–∞–ø—Ä–∏–º–µ—Ä, napopravku.ru) (—ç—Ç–æ —Ç–æ–ª—å–∫–æ –¥–ª—è CRM !!!)            |
| `erp_jorder_id`         | int NULL                   | ID –∑–∞–∫–∞–∑–∞ –≤ ERP                                                          |
| `analysis_id`           | int NULL                   | ID –∞–Ω–∞–ª–∏–∑–∞ –≤ ERP                                                         |
| `price_order_uid`       | varchar(100) NULL          | UID –∑–∞–∫–∞–∑–∞ (—ç—Ç–æ `erp.price_order.uid`)                                   |
| `is_paid`               | integer (0/1)              | –§–ª–∞–≥ –æ–ø–ª–∞—Ç—ã: `1` ‚Äî –æ–ø–ª–∞—á–µ–Ω–æ, `0` ‚Äî –Ω–µ –æ–ø–ª–∞—á–µ–Ω–æ (—Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ—Ö —á—Ç–æ –ø—Ä–∏—à–ª–∏ —Å price)  |
| `analysis_name`         | string                     | –ù–∞–∑–≤–∞–Ω–∏–µ –∞–Ω–∞–ª–∏–∑–∞ –∏–ª–∏ —Ç–µ—Å—Ç–∞                                              |
| `room_name`             | string                     | –ò–º—è –≤—Ä–∞—á–∞ –∏–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–∞–±–∏–Ω–µ—Ç–∞                                          |
| `office_address`        | string                     | –∞–¥—Ä–µ—Å –æ—Ñ–∏—Å–∞                                                              |
| `office_phones`         | string                     | –¢–µ–ª–µ—Ñ–æ–Ω—ã –æ—Ñ–∏—Å–∞                                                           |
| `office_comment`        | text                       | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –ø–æ –æ—Ñ–∏—Å—É, –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –¥–ª–∏–Ω–Ω—ã–π –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç        |


#### üìä –°—Ç–∞—Ç—É—Å—ã –ø—Ä–∏—ë–º–∞ (`appointment.status`)
**1 ‚Äî –¢—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ**  
–ü—Ä–∏—ë–º —Å–æ–∑–¥–∞–Ω, –Ω–æ –µ—â—ë –Ω–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω.

**3 ‚Äî –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ**  
–ü—Ä–∏—ë–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω –∏ –æ–∂–∏–¥–∞–µ—Ç—Å—è.

**4 ‚Äî –ü—Ä–∏—ë–º —Å–æ—Å—Ç–æ—è–ª—Å—è**  
–ü–∞—Ü–∏–µ–Ω—Ç –ø—Ä–∏—à—ë–ª, –ø—Ä–∏—ë–º —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ–≤–µ–¥—ë–Ω.

**6 ‚Äî –ù–µ—è–≤–∫–∞ –ø–∞—Ü–∏–µ–Ω—Ç–∞**  
–ü–∞—Ü–∏–µ–Ω—Ç –Ω–µ —è–≤–∏–ª—Å—è –Ω–∞ –ø—Ä–∏—ë–º.

#### üõ∞Ô∏è –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –∑–∞–ø–∏—Å–∏ (`appointment.source`)

**1 ‚Äî CRM**  
–ó–∞–ø–∏—Å—å —Å–æ–∑–¥–∞–Ω–∞ –≤—Ä—É—á–Ω—É—é –≤ CRM.

**2 ‚Äî prodoctorov**  
–ó–∞–ø–∏—Å—å –ø–æ—Å—Ç—É–ø–∏–ª–∞ —Å —Å–∞–π—Ç–∞ [prodoctorov.ru](https://prodoctorov.ru).

**3 ‚Äî napopravku.ru**  
–ó–∞–ø–∏—Å—å –ø–æ—Å—Ç—É–ø–∏–ª–∞ —Å —Å–∞–π—Ç–∞ [napopravku.ru](https://napopravku.ru).

**4 ‚Äî price.genomed.ru**  
–ó–∞–ø–∏—Å—å –ø–æ—Å—Ç—É–ø–∏–ª–∞ —Å –ø–æ—Ä—Ç–∞–ª–∞ [price.genomed.ru](https://price.genomed.ru).

**5 ‚Äî –ú–¶ –•–∞–±–∞—Ä–æ–≤—Å–∫**  
–ó–∞–ø–∏—Å—å —Å–æ–∑–¥–∞–Ω–∞ –≤ —Ñ–∏–ª–∏–∞–ª–µ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–≥–æ —Ü–µ–Ω—Ç—Ä–∞ –≤ –•–∞–±–∞—Ä–æ–≤—Å–∫–µ.


# API: –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ –æ–¥–Ω–æ–π –ó–ê–ü–ò–°–ò (Appointment)

–ú–µ—Ç–æ–¥ `POST /api/lk/schedule/get-appointment`

## –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞

–ü–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ —Ç–µ–ª–µ –∑–∞–ø—Ä–æ—Å–∞ (—Ñ–æ—Ä–º–∞—Ç JSON):

| –ü–∞—Ä–∞–º–µ—Ç—Ä            | –¢–∏–ø     | –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π | –û–ø–∏—Å–∞–Ω–∏–µ                                      |
|---------------------|---------|--------------|-----------------------------------------------|
| `lk_id`             | integer | –î–∞           |  ID –∏–∑ LK                                     |
| `crm_appointment_id`| integer | –î–∞           |  ID –∑–∞–ø–∏—Å–∏                                    |


### –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞

```json
{
  "lk_id": 3703,
  "crm_appointment_id" : 102254
}
```
### üì§ –ü—Ä–∏–º–µ—Ä —É—Å–ø–µ—à–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ code 200
```json
{
    "status": "success",
    "data": {
        "id": 102254,
        "date": "2025-06-11",
        "time_start": "09:00:00",
        "time_end": "10:00:00",
        "room_id": 30,
        "patient_id": 86805,
        "title": "–ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç",
        "purpose": "–ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç",
        "status": 1,
        "created_by": 456,
        "created_at": "2025-06-02 21:32:55",
        "source": 4,  // –ò—Å—Ç–æ—á–Ω–∏–∫ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø–∏—Å–∏ 4 —ç—Ç–æ price
        "appointment_cabinet_id": null,
        "type": 3,
        "uuid": null, // —Ç–æ–ª—å–∫–æ –¥–ª—è crm
        "erp_jorder_id": 235287,
        "analysis_id": null,
        "price_order_uid": null, // –¥–ª—è —Å—Å—ã–ª–∫–∏ –Ω–∞ –æ–ø–ª–∞—Ç—É
        "is_paid": 0,
        "med_appointment_id": null
    }
}
```




# API: –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–≤–æ–±–æ–¥–Ω—ã—Ö —è—á–µ–µ–∫  –Ω–∞—á–∏–Ω–∞—è —Å –∑–∞–≤—Ç—Ä–∞ –Ω–∞ 13 –¥–Ω–µ–π –≤–ø–µ—Ä—ë–¥

–ú–µ—Ç–æ–¥ `POST /api/lk/schedule/get-free-slots`


## –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞

–ü–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ —Ç–µ–ª–µ –∑–∞–ø—Ä–æ—Å–∞ (—Ñ–æ—Ä–º–∞—Ç JSON):

| –ü–∞—Ä–∞–º–µ—Ç—Ä       | –¢–∏–ø     | –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π | –û–ø–∏—Å–∞–Ω–∏–µ                                      |
|----------------|---------|--------------|-----------------------------------------------|
| `crm_room_id`  | integer | –î–∞           | ID –∫–∞–±–∏–Ω–µ—Ç–∞/–≤—Ä–∞—á–∞ (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π ID –≤ CRM)       |

---

### –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞

```json
{
  "crm_room_id": 3
}
```

### üì§ –ü—Ä–∏–º–µ—Ä —É—Å–ø–µ—à–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ code 200
```json
{
  "success": true,
  "data": {
    "crm_room_id": "3",
    "room_name": "–ü—Ä–æ—Ü–µ–¥—É—Ä–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –ú–æ—Å–∫–≤–∞ (—É–ª.–£–ª–∏—Ü–∞, –¥. 33)",
    "office_id": "1",
    "office_name": "–ú–û –ú–æ—Å–∫–≤–∞",
    "office_address": "–≥. –ú–æ—Å–∫–≤–∞, —É–ª. –£–ª–∏—Ü–∞, –¥. 33.",
    "office_phones": "–¥–æ–±. 1111,3333",
    "office_comment": "–î–ª–∏–Ω–Ω—ã–π –∫–æ–º–µ–Ω—Ç",
    "cells": [
      {
        "dt": "2025-06-25",
        "time_start": "09:00:00",
        "time_end": "09:30:00",
        "free": 1,
        "type": 1
      },
      {
        "dt": "2025-06-26",
        "time_start": "10:00:00",
        "time_end": "10:30:00",
        "free": 1,
        "type": 1
      }
    ]
  }
}
```

### üì§ –ü—Ä–∏–º–µ—Ä –æ—à–∏–±–∫–∏ code 200
```json
{
    "status": "fail",
    "error": "–ù–µ –ø–µ—Ä–µ–¥–∞–Ω –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä crm_room_id",
    "code": 10
}
```



# API: –ò–∑–º–µ–Ω–µ–Ω–∏–µ –¥–∞—Ç—ã (–≤—Ä–µ–º–µ–Ω–∏) –∑–∞–ø–∏—Å–∏  
**URL:** `POST /api/lk/schedule/change-date`  
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–µ—Ä–µ–Ω–æ—Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∑–∞–ø–∏—Å–∏ –Ω–∞ –Ω–æ–≤—É—é –¥–∞—Ç—É –∏ –≤—Ä–µ–º—è.

## üî∏ –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞

```json
{
  "crm_appointment_id": 102282,
  "date": "2025-06-25",
  "time_start": "09:00:00",
  "time_end": "10:00:00"
}
```

## –ü–∞—Ä–∞–º–µ—Ç—Ä—ã

- `crm_appointment_id` (integer, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π) ‚Äî ID —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∑–∞–ø–∏—Å–∏ –≤ CRM  
- `date` (string, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π) ‚Äî –ù–æ–≤–∞—è –¥–∞—Ç–∞ –¥–ª—è –∑–∞–ø–∏—Å–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `Y-m-d`  
- `time_start` (string, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π) ‚Äî –ù–∞—á–∞–ª–æ –∑–∞–ø–∏—Å–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `H:i:s`  
- `time_end` (string, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π) ‚Äî –û–∫–æ–Ω—á–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `H:i:s`

## ‚úÖ –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç (–∫–æ–¥ 200)

```json
{
  "status": "success",
  "data": [
    "–ó–∞–ø–∏—Å—å —É—Å–ø–µ—à–Ω–æ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–∞ –Ω–∞: 27.06.2025 —Å 09:00 –¥–æ 10:00"
  ]
}
```


## ‚ùå –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (–∫–æ–¥ 200)

```json
{
  "status": "fail",
  "error": "–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏. –≠—Ç–æ –≤—Ä–µ–º—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ –¥–ª—è –∑–∞–ø–∏—Å–∏; –≠—Ç–æ –≤—Ä–µ–º—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ –¥–ª—è –∑–∞–ø–∏—Å–∏",
  "code": 15
}
```


# –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –Ω–∞ –ø—Ä–∏—ë–º
**URL:** `POST /api/lk/schedule/delete-appointment`

**–û–ø–∏—Å–∞–Ω–∏–µ:**  
–£–¥–∞–ª—è–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∑–∞–ø–∏—Å—å –Ω–∞ –ø—Ä–∏—ë–º, –µ—Å–ª–∏ –æ–Ω–∞ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞ –±–æ–ª–µ–µ —á–µ–º —á–µ—Ä–µ–∑ 1 —á–∞—Å.

## –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞
–ü–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ —Ç–µ–ª–µ –∑–∞–ø—Ä–æ—Å–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON:

| –ü–∞—Ä–∞–º–µ—Ç—Ä            | –¢–∏–ø    | –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π | –û–ø–∏—Å–∞–Ω–∏–µ                       |
|---------------------|--------|--------------|--------------------------------|
| crm_appointment_id  | int    | –î–∞           | ID –∑–∞–ø–∏—Å–∏, –∫–æ—Ç–æ—Ä—É—é –Ω—É–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å |

### –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞

```json
{
  "crm_appointment_id": 102282
}
```

### –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç (HTTP 200)
```json
{
  "status": "success",
  "data": ["–ó–∞–ø–∏—Å—å —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω–∞"]
}
```


### –û—à–∏–±–∫–∞: –∑–∞–ø–∏—Å—å –Ω–µ–ª—å–∑—è —É–¥–∞–ª–∏—Ç—å, –µ—Å–ª–∏ –æ–Ω–∞ —á–µ—Ä–µ–∑ —á–∞—Å –∏–ª–∏ —É–∂–µ –ø—Ä–æ—à–ª–∞ (HTTP 200)
```json
{
  "status": "fail",
  "error": "–ù–µ–ª—å–∑—è —É–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å—å, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç —á–µ—Ä–µ–∑ —á–∞—Å –∏–ª–∏ —É–∂–µ –ø—Ä–æ—à–ª–∞",
  "code": 15
}
```



## üßæ –ö–æ–¥—ã –æ—à–∏–±–æ–∫ API

–û–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö –∫–æ–¥–æ–≤ –æ—à–∏–±–æ–∫, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –≤ –ø–æ–ª–µ `code` –ø—Ä–∏ —Å—Ç–∞—Ç—É—Å–µ `"fail"`:

| –ö–æ–¥ | –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞                     | –û–ø–∏—Å–∞–Ω–∏–µ                                                         |
|-----|-------------------------------|------------------------------------------------------------------|
| 2   | `CODE_BAD_API`                | –ù–µ–≤–µ—Ä–Ω—ã–π API-–∫–ª—é—á. –ö–ª–∏–µ–Ω—Ç –Ω–µ –ø—Ä–æ—à—ë–ª –ø—Ä–æ–≤–µ—Ä–∫—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.        |
| 8   | `CODE_NOT_FOUND`              | –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã–π –æ–±—ä–µ–∫—Ç  –Ω–µ –Ω–∞–π–¥–µ–Ω.                                 |
| 9   | `CODE_INVALID_FORMAT`         | –û—à–∏–±–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ –¥–∞–Ω–Ω—ã—Ö ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π JSON.  |
| 10  | `CODE_REQUIRED_PARAM`         | –ù–µ –ø–µ—Ä–µ–¥–∞–Ω—ã –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞.                      |
| 15  | `CODE_ERROR_UPDATE_APP`       | –û—à–∏–±–∫–∞ —Å–º–µ–Ω—ã —Å–ª–æ—Ç–∞.                                              |
| 16  | `CODE_ERROR_DELETE_APP`       | –û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –∑–∞–ø–∏—Å–∏.                                          |



